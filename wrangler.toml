name = "rec-time-be"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
account_id = "a6d1a427beffc5898641e90e99cdb49b"

# ----------------------------
# 공통 환경변수 (모든 환경에서 사용)
# ----------------------------
[vars]
NODE_ENV = "production"
FCM_PROJECT_ID = "rec-time-593b0"

# Secrets (wrangler secret put で設定):
# - FCM_SERVICE_ACCOUNT_JSON: Firebaseサービスアカウント秘密鍵JSON

# ----------------------------
# 개발 환경 (wrangler dev 시 사용)
# ----------------------------
[env.development]
[env.development.vars]
NODE_ENV = "development"
PORT = "8787"
HOST = "0.0.0.0"

# ----------------------------
# ✅ D1 Database 연결 (최신 버전)
# ----------------------------
[[d1_databases]]
binding = "DB"                      
database_name = "rec-time-be"
database_id = "b93ec427-7cdb-4ad7-8944-ed807ba24b03"

# ----------------------------
# ⏰ Cron Triggers (通知チェック)
# ----------------------------
[triggers]
crons = ["* * * * *"]  # 1分ごとに実行
