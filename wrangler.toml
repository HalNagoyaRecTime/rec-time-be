name = "rec-time-be"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
account_id = "a6d1a427beffc5898641e90e99cdb49b"

# ----------------------------
# 🌐 공통 환경변수 (모든 환경 공통)
# ----------------------------
[vars]
NODE_ENV = "production"

# ⚠️ 시크릿 키(FIREBASE_SERVICE_ACCOUNT_KEY)는 여기 넣지 않습니다.
# → 반드시 `wrangler secret put FIREBASE_SERVICE_ACCOUNT_KEY --name rec-time-be --env=""` 로만 등록하세요.

# ----------------------------
# 🧩 개발 환경 설정 (로컬 개발용)
# ----------------------------
[env.development]
[env.development.vars]
NODE_ENV = "development"
PORT = "8787"
HOST = "0.0.0.0"

# ----------------------------
# 💾 Cloudflare D1 Database 연결
# ----------------------------
[[d1_databases]]
binding = "DB"                      
database_name = "rec-time-be"
database_id = "b93ec427-7cdb-4ad7-8944-ed807ba24b03"

# ----------------------------
# ⏰ Cron Trigger 설정 (5분마다 알림 체크)
# ----------------------------
[[triggers]]
crons = ["*/5 * * * *"]

# ----------------------------
# 🚀 배포 관련 설정
# ----------------------------
[env.production]
# 환경 경고 방지용 (기본값을 명시)
[env.production.vars]
NODE_ENV = "production"
